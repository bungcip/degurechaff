<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap@next/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css" />

    <title>TOML to JSON Converter</title>

</head>

<body>
    <div id="root">
        <b-container fluid>
            <b-row>
                <b-col>
                    <h3>TOML</h3>
                    <b-form-textarea placeholder="place TOML code here..." v-model="input" @input="convert()">
                    </b-form-textarea>
                </b-col>
                <b-col>
                    <h3>JSON</h3>
                    <b-form-textarea :value="output"></b-form-textarea>
                </b-col>
            </b-row>
        </b-container>
    </div>

    <script src="https://unpkg.com/chevrotain/lib/chevrotain.js"></script>
    <script src="../dist/degurechaff.iife.js"></script>

    <script src="https://unpkg.com/vue@2.5.2/dist/vue.js"></script>
    <script src="https://unpkg.com/babel-polyfill@latest/dist/polyfill.min.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>

    <script>
        'use strict'
        // Vue.use(BootstrapVue)

        const app = new Vue({
            el: '#root',
            data: {
                input: '',
                output: '',
            },
            methods: {
                convert() {
                    try {
                        const json = degurechaff.dump(this.input)
                        const text = JSON.stringify(json)
                        this.output = text
                    } catch (error) {
                        this.output = '<error>'
                    }
                }
            }
        });
    </script>
</body>

</html>